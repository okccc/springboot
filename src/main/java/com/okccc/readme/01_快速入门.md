## SpringBoot
```shell
# 系统要求：jdk17、maven3.6.3、servlet6、tomcat10

# 开发步骤：创建项目 - pom.xml导入启动器 - application.yml修改配置项 - 启动类 - 业务类

# 启动器：https://docs.spring.io/spring-boot/docs/current/reference/html/using.html#using.build-systems.starters
# 配置项：https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#appendix.application-properties

# 官方提供的启动器：spring-boot-starter-xxx
# 第三方提供启动器：xxx-spring-boot-starter

# 简化整合：导入starter就会自动整合相关功能
# 简化配置：application.yml集中管理spring/springmvc/mybatis/datasource/redis等所有配置
# 简化部署：以前web项目是打成war包部署到tomcat,现在只要有java环境就行,java -jar会触发内置tomcat运行
# 简化运维：jar包外部放一个application.yml文件即可

# 依赖管理
# 启动器会包含一组依赖,按照maven依赖的传递原则A-B-C,导入启动器也会把这些依赖都导进来
# 比如导入starter-web会自导入该场景下的所有依赖starter-tomcat、starter-json、spring-web、spring-webmvc
# boot项目 - spring-boot-starter-parent - spring-boot-dependencies 声明了大部分常见jar包的依赖版本
# 父项目管理所有依赖的版本,保证依赖之间的兼容性和稳定性,当然也可以自定义版本将其覆盖,父项目没有的第三方jar包要单独引入

# 自动配置
# starter-xxx - spring-boot-starter - spring-boot-autoconfigure囊括了所有场景启动器的配置类
# - XxxAutoConfiguration配置类 - @Bean注册组件 - XxxProperties属性类 - application.yml配置项
# 1.导入starter就会导入spring-boot-autoconfigure包
# 2.META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports指定了项目启动时要加载的所有自动配置类
# 3.@EnableAutoConfiguration会把这些自动配置类都导入进来,并根据条件注解按需加载
# 4.XxxAutoConfiguration通过@Bean/@Import往容器中注册组件,这些组件从XxxProperties提取属性值
# 5.XxxProperties又是和application.yml绑定,所以导入starter后只需修改配置项就能修改组件底层行为
```

## 自动配置源码分析
```shell
@SpringBootApplication
# @SpringBootConfiguration：标记为配置类,代替配置文件,点进去发现就是@Configuration
# @EnableAutoConfiguration：开启自动配置(核心),包含两部分
# @ComponentScan：排除前面已经扫描过的@Configuration和@AutoConfiguration,避免重复扫描
# 多个注解的执行顺序是由内到外,debug时断点顺序如下：
# AutoConfigurationExcludeFilter(50行) - AutoConfigurationImportSelector(126行) - AutoConfigurationPackages.Registrar(128行)

@EnableAutoConfiguration
# 1.加载主程序包下自定义的组件
# @EnableAutoConfiguration - @AutoConfigurationPackage - @Import(AutoConfigurationPackages.Registrar.class)
# Registrar源码128行打断点debug运行 - 选中new PackageImports(metadata).getPackageNames()
# 右键 - Evaluate Expression - Evaluate,发现result="com.okccc",这就解释了为啥SpringBoot默认只扫描主程序所在包及其子包

# 2.加载autoconfigure包下各个starter引入的组件
# @EnableAutoConfiguration - @Import(AutoConfigurationImportSelector.class)
# AutoConfigurationImportSelector源码126行打断点debug运行 - StepInto进入load方法 - 继续StepInto并选中load - 往下StepOver
# 发现location="META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports"
# 项目启动时会加载该文件中的所有配置类,但并不会全部生效,因为每个配置类都添加了条件注解,查看源码发现报红说明缺少相关启动器依赖,按需加载即可

@EnableConfigurationProperties
# XxxAutoConfiguration - 直接搜索@EnableConfigurationProperties - XxxProperties
# EmbeddedWebServerFactoryCustomizerAutoConfiguration - ServerProperties - prefix = "server"
# WebMvcAutoConfiguration - WebMvcProperties & WebProperties - "spring.web"
# DispatcherServletAutoConfiguration - WebMvcProperties - prefix = "spring.mvc"
# ThymeleafAutoConfiguration - ThymeleafProperties - prefix = "spring.thymeleaf"
# MessageSourceAutoConfiguration - prefix = "spring.messages"
# DataSourceAutoConfiguration - DataSourceProperties - prefix = "spring.datasource"
# DruidDataSourceAutoConfigure - DruidStatProperties & DataSourceProperties - "spring.datasource.druid"
# RedisAutoConfiguration - RedisProperties - prefix = "spring.data.redis"
# ElasticsearchRestClientAutoConfiguration - ElasticsearchProperties - prefix = "spring.elasticsearch"
# MybatisAutoConfiguration - MybatisProperties - prefix = "mybatis"
```